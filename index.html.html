<!--
  Sorry Page — Single-file HTML (Barbie + Kinder Joy inspired)
  -----------------------------------------------------------
  Palette:
    Pink:       #FFC1E3
    Lavender:   #E3C8FF
    SoftPurple: #C8A2FF
    BabyBlue:   #CDE8FF
    CreamWhite: #FFF7FB
    AccentRed:  #FF6B81

  Fonts (Google): Parisienne (display), Great Vibes (script), Poppins (body)
  How to replace assets / text:
    - Intro paragraph:        element id="introText"
    - Memories images (replace src attribute): 
         mem1Img, mem2Img, mem3Img, mem4Img, mem5Img, mem6Img
         (modal text -> mem1Text .. mem6Text, modal date -> mem1Date .. mem6Date)
    - Comeback paragraph:     id="comebackText"
    - Chat messages JSON:     edit the `chatMessages` array in the script
    - Future goals paragraph: id="futureGoalsText"
  Notes:
    - No external JS frameworks. Google Fonts used via <link>.
    - Accessibility: modals trap focus, ESC & click-outside close, visible focus states.
    - Prefers-reduced-motion honored.
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Raksha Baby — Sorry</title>
<link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  /* =========================
     Root / Theme
     ========================= */
  :root{
    --pink:#FFC1E3;
    --lav:#E3C8FF;
    --soft-purple:#C8A2FF;
    --baby-blue:#CDE8FF;
    --cream:#FFF7FB;
    --accent:#FF6B81;
    --ink:#32243c;
    --muted:#6d5f7b;
    --glass: rgba(255,247,251,0.6);
    --card-shadow: 0 10px 30px rgba(200,162,255,0.18);
    --soft-shadow: 0 6px 18px rgba(60,40,90,0.07);
    --radius-lg:16px;
    --radius-xl:22px;
  }

  html { scroll-behavior: smooth; }
  *{ box-sizing: border-box; }
  body{
    margin:0;
    font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    color:var(--ink);
    background: linear-gradient(135deg, var(--baby-blue), var(--pink) 60%);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.5;
  }

  /* Utility */
  .container{ max-width:1100px; margin:0 auto; padding:0 18px; }
  section{ padding:56px 0; }

  /* =========================
     Particles (background bubbles & sparkles)
     ========================= */
  .bg-layer{ position:fixed; inset:0; z-index:-2; pointer-events:none; }
  .bg-grad {
    position:absolute; inset:0;
    background:
      radial-gradient(800px 500px at 10% 10%, rgba(200,162,255,0.22), transparent 30%),
      radial-gradient(700px 420px at 90% 30%, rgba(205,232,255,0.22), transparent 30%),
      linear-gradient(180deg, rgba(255,247,251,0.9), rgba(255,247,251,0.6));
    filter: saturation(1.02);
    animation: bgShift 18s ease-in-out infinite alternate;
  }
  @keyframes bgShift { from{ filter: hue-rotate(0deg);} to{ filter: hue-rotate(6deg);} }
  @media (prefers-reduced-motion: reduce){ .bg-grad{ animation: none; } }

  .particles { position:fixed; inset:0; z-index:-1; pointer-events:none; }
  .particle { position:absolute; border-radius:50%; opacity:.75; transform:translate3d(0,0,0); }

  /* =========================
     Header / Hero
     ========================= */
  header.hero{ padding:84px 0 44px; text-align:center; position:relative; overflow:visible; }
  .hero-inner{ max-width:920px; margin:0 auto; }
  .hero-sub{ font-family:'Great Vibes', cursive; color:var(--muted); font-size:20px; margin-bottom:6px; }
  .hero-title{
    font-family:'Parisienne', cursive;
    font-size:clamp(42px, 7vw, 84px);
    color:var(--ink);
    line-height:0.95;
    margin:6px 0 12px;
    text-shadow: 0 6px 24px rgba(200,162,255,0.18);
    display:inline-block;
    position:relative;
    padding: 6px 14px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));
  }
  .hero-cta{
    margin-top:14px;
    display:inline-flex; gap:10px; align-items:center;
  }
  .btn{
    appearance:none; border:0; cursor:pointer;
    background: linear-gradient(90deg, var(--lav), var(--soft-purple));
    color:#2c1f3a; padding:12px 18px; border-radius:999px; font-weight:600; box-shadow:var(--card-shadow);
  }
  .btn:focus{ outline:3px solid rgba(255,193,227,0.45); outline-offset:4px; }

  /* Headline entrance (letter stagger) */
  .headline-letters span{ display:inline-block; opacity:0; transform:translateY(10px); }
  .headline-letters span.in{ opacity:1; transform:none; transition:transform .45s cubic-bezier(.2,.9,.25,1), opacity .45s; }

  /* =========================
     Intro paragraph card
     ========================= */
  .intro-card{
    margin:18px auto 0; max-width:820px;
    background:var(--glass); border-radius:var(--radius-xl);
    padding:20px 22px; box-shadow:var(--soft-shadow); border:1px solid rgba(255,255,255,0.6);
  }
  .from-note{ font-family:'Great Vibes', cursive; color:var(--muted); font-size:22px; margin-bottom:6px; }
  #introText{ color:var(--ink); font-size:16px; }

  /* =========================
     Memories grid (6 cards) - Kinder Joy like cards
     ========================= */
  .section-title{ font-weight:700; font-size:clamp(20px, 4vw, 28px); color:var(--ink); margin-bottom:16px; text-align:center; }
  .mem-grid{ display:grid; gap:18px; grid-template-columns: repeat(1, 1fr); }
  @media(min-width:680px){ .mem-grid{ grid-template-columns: repeat(2,1fr); } }
  @media(min-width:980px){ .mem-grid{ grid-template-columns: repeat(3,1fr); } }

  .mem-card{
    background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.72));
    border-radius:18px; overflow:hidden; box-shadow:var(--card-shadow);
    transition: transform .28s ease, box-shadow .28s ease;
    border:1px solid rgba(255,255,255,0.8);
  }
  .mem-card:focus-within, .mem-card:hover{ transform:translateY(-6px); box-shadow: 0 20px 40px rgba(80,40,140,0.12); }
  .mem-thumb{ width:100%; height:200px; object-fit:cover; display:block; }
  .mem-body{ padding:12px 14px 18px; text-align:center; }
  .mem-title{ font-weight:600; color:var(--accent); letter-spacing:0.2px; font-size:16px; }

  /* Button overlay (invisible full-card button) for accessibility */
  .mem-action{ position:absolute; inset:0; border:0; background:transparent; cursor:pointer; }

  /* =========================
     Modal (accessible)
     ========================= */
  .modal-backdrop{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60; background:linear-gradient(180deg, rgba(12,8,20,0.28), rgba(12,8,20,0.38)); padding:22px; }
  .modal-backdrop[aria-hidden="false"]{ display:flex; }
  .modal-card{ width:min(760px, 96vw); background:var(--cream); border-radius:18px; box-shadow: 0 18px 40px rgba(30,10,60,0.35); position:relative; overflow:hidden; border:1px solid rgba(255,255,255,0.7); }
  .modal-head{ padding:14px 18px; background: linear-gradient(90deg,var(--pink), var(--lav)); font-weight:700; font-size:18px; color:#2a1b3d; }
  .modal-body{ padding:18px; color:var(--muted); font-size:15px; }
  .modal-date{ font-size:13px; color:#7a6d8b; position:absolute; right:14px; bottom:12px; }
  .modal-close{ position:absolute; top:10px; right:10px; width:38px; height:38px; border-radius:50%; border:0; background:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.12); cursor:pointer; }

  /* =========================
     Sorry / Comeback
     ========================= */
  .comeback-card{ max-width:860px; margin:0 auto; background:var(--glass); padding:18px; border-radius:18px; box-shadow:var(--soft-shadow); border:1px solid rgba(255,255,255,0.6); text-align:center; }
  .separator-icons{ display:flex; gap:12px; justify-content:center; margin:10px 0 18px; color:var(--muted); }

  /* =========================
     Chat block (single block, IG like) - minimal emojis
     ========================= */
  .chat-wrap{ max-width:920px; margin:0 auto; background:linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,247,251,0.9)); padding:18px; border-radius:18px; box-shadow:var(--card-shadow); border:1px solid rgba(255,255,255,0.8); }
  .chat-header{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
  .chat-title{ font-weight:700; color:var(--soft-purple); font-size:18px; }
  .chat-list{ display:flex; flex-direction:column; gap:10px; padding:6px 4px; max-height:420px; overflow:auto; }
  .chat-row{ display:flex; gap:10px; align-items:flex-end; max-width:78%; transition: transform .35s ease, opacity .35s; opacity:0; transform: translateY(10px); }
  .chat-row.in{ opacity:1; transform:translateY(0); }
  .chat-left{ align-self:flex-start; }
  .chat-right{ margin-left:auto; align-self:flex-end; flex-direction:row-reverse; }
  .chat-bubble{
    padding:10px 14px; border-radius:16px; box-shadow:var(--soft-shadow); font-size:15px; line-height:1.35;
    background: #fff; border:1px solid rgba(255,255,255,0.7);
  }
  .chat-bubble.me{ background: linear-gradient(180deg, rgba(200,162,255,0.12), rgba(255,247,251,0.9)); border-color: rgba(200,162,255,0.2); }
  .chat-avatar{ width:40px; height:40px; border-radius:50%; flex:0 0 40px; box-shadow:0 6px 16px rgba(0,0,0,0.12); object-fit:cover; }
  .chat-ts{ font-size:11px; color:#7a6d8b; margin-top:6px; text-align:right; }

  /* =========================
     Future Goals
     ========================= */
  .goals-card{ max-width:820px; margin:0 auto; background:var(--glass); padding:18px; border-radius:18px; box-shadow:var(--soft-shadow); border:1px solid rgba(255,255,255,0.6); text-align:center; position:relative; }
  .toy-svg{ position:absolute; width:44px; opacity:0.65; animation:bob 6s ease-in-out infinite; }
  @keyframes bob{ 0%{transform:translateY(0);} 50%{transform:translateY(-10px);} 100%{transform:translateY(0);} }

  /* =========================
     Footer & back-to-top
     ========================= */
  footer{ text-align:center; padding:24px 18px; color:var(--muted); font-size:14px; background:transparent; }
  .back-top{ position:fixed; right:18px; bottom:18px; width:52px; height:52px; border-radius:999px; border:0; background:linear-gradient(90deg,var(--lav),var(--soft-purple)); color:#2a1b3a; display:flex; align-items:center; justify-content:center; box-shadow:var(--card-shadow); cursor:pointer; }

  /* Accessibility focus */
  :focus{ outline: 3px solid rgba(255,193,227,0.45); outline-offset:3px; }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    .headline-letters span{ transition:none !important; }
    .bg-grad{ animation:none !important; }
    .particle *{ animation:none !important; }
    .chat-row, .mem-card{ transition:none !important; transform:none !important; }
  }

</style>
</head>
<body>
  <!-- Background -->
  <div class="bg-layer" aria-hidden="true">
    <div class="bg-grad"></div>
    <div class="particles" id="particles" aria-hidden="true"></div>
  </div>

  <!-- HERO -->
  <header class="hero" role="banner">
    <div class="container hero-inner">
      <div class="hero-sub" aria-hidden="true">Motooo</div>
      <h1 class="hero-title" aria-label="Raksha Baby Love You">
        <span class="headline-letters" id="heroLetters">Raksha 💖</span>
      </h1>

      <div class="hero-cta" style="margin-top:12px;">
        <button class="btn" id="openMemBtn" aria-controls="memories">Open Our Memories</button>
      </div>
    </div>
  </header>

  <main class="container" id="main" role="main">
    <!-- Intro -->
    <section aria-labelledby="intro-heading">
      <div class="intro-card" role="region" aria-describedby="introText">
        <div class="from-note">Tiwari Sorry</div> <!-- changed as requested -->
        <h2 id="intro-heading" style="position:absolute; left:-9999px; top:auto;">Intro</h2>
        <p id="introText">Hey Moto — yeh ek chhota sa note hai jo main tumhare liye banaya. ik me chutiya, pagal, bseless, toxic, hu but sahi me tere bina kuch acha nahi lagta merko baby tu yr meri hi h or rahegi maine thuje esa dekha h punch mut no words to explain but han me changed hounga tere liye galtiya sudharunga apni nahi khona chahta terko tiwari me kabhi bhi meri iizat tere hatho hi he tu i sab kuxh he mere liye mummy papa ke baad tune hi mera khyal rakha h baby please maaf krde galtiyan apno se hoti h but me to tera pati to maaf krde lala please moto and sorry maaf krde sorrrrrryyyyyyyyyyyyyy mere ladoo love u moto.</p>
      </div>
    </section>

    <!-- Memories -->
    <section id="memories" aria-labelledby="memories-heading">
      <h2 id="memories-heading" class="section-title">Our Memories</h2>
      <div class="mem-grid" role="list">
        <!-- Card 1 -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem1Title">
          <!-- Replace src with your photo: id="mem1Img" -->
          <img id="mem1Img" class="mem-thumb" src="images/1.jpg" alt="First Photo" />
          <div class="mem-body">
            <div id="mem1Title" class="mem-title">To Best moment</div>
            <button class="btn" style="margin-top:10px;" data-modal="modal1">Open</button>
          </div>
        </article>

        <!-- Card 2 -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem2Title">
          <img id="mem2Img" class="mem-thumb" src="images/2.jpg" alt="Far Bond Meet-up photo" />
          <div class="mem-body">
            <div id="mem2Title" class="mem-title">Far bond meet-up</div>
            <button class="btn" style="margin-top:10px;" data-modal="modal2">Open</button>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem3Title">
          <img id="mem3Img" class="mem-thumb" src="images/3.jpg" alt="Vanished Aura photo" />
          <div class="mem-body">
            <div id="mem3Title" class="mem-title">Vanished Aura</div>
            <button class="btn" style="margin-top:10px;" data-modal="modal3">Open</button>
          </div>
        </article>

        <!-- Card 4 -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem4Title">
          <img id="mem4Img" class="mem-thumb" src="images/4.jpg" alt="Muchhad photo" />
          <div class="mem-body">
            <div id="mem4Title" class="mem-title">Muchhad</div>
            <button class="btn" style="margin-top:10px;" data-modal="modal4">Open</button>
          </div>
        </article>

        <!-- Card 5 -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem5Title">
          <img id="mem5Img" class="mem-thumb" src="images/5.jpg" alt="Nakhre photo" />
          <div class="mem-body">
            <div id="mem5Title" class="mem-title">Nakhre</div>
            <button class="btn" style="margin-top:10px;" data-modal="modal5">Open</button>
          </div>
        </article>

        <!-- Card 6 (Drawing) -->
        <article class="mem-card" role="listitem" tabindex="0" aria-labelledby="mem6Title">
  <img id="mem6Img" class="mem-thumb"
       src="images/6.jpg"
       alt="Drawing photo" />
  <div class="mem-body">
    <div id="mem6Title" class="mem-title">Drawing</div>
    <button class="btn" style="margin-top:10px;" data-modal="modal6">Open</button>
  </div>
</article>

      </div>
    </section>

    <!-- Modals -->
    <!-- Modal 1 -->
    <div class="modal-backdrop" id="modal1" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal1Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal1Title">First Photo</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem1Text">Do you remember, this was the first photo you sent me?.</p>
          <div id="mem1Date" class="modal-date">09 July 2024</div>
        </div>
      </div>
    </div>

    <!-- Modal 2 -->
    <div class="modal-backdrop" id="modal2" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal2Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal2Title">Far Bond Meet-up</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem2Text">Our Far bond meet-up.</p>
          <div id="mem2Date" class="modal-date">27 July 2025</div>
        </div>
      </div>
    </div>

    <!-- Modal 3 -->
    <div class="modal-backdrop" id="modal3" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal3Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal3Title">Vanished Aura</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem3Text">Jab first time tune mummy ko text kra tha tera aura vanished hogya.</p>
          <div id="mem3Date" class="modal-date">30 July 2025</div>
        </div>
      </div>
    </div>

    <!-- Modal 4 -->
    <div class="modal-backdrop" id="modal4" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal4Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal4Title">Choti Muccho Wali</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem4Text">I have never liked this woman with a small mustache:) the affection she shows is selfish love..</p>
          <div id="mem4Date" class="modal-date">27 April 2025</div>
        </div>
      </div>
    </div>

    <!-- Modal 5 -->
    <div class="modal-backdrop" id="modal5" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal5Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal5Title">Nakhre</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem5Text">Awwwwwweee nakhre dekho iske bhoundu kahi ki.</p>
          <div id="mem5Date" class="modal-date">16 Aug 2024</div>
        </div>
      </div>
    </div>

    <!-- Modal 6 -->
    <div class="modal-backdrop" id="modal6" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal6Title">
      <div class="modal-card" role="document">
        <div class="modal-head" id="modal6Title">Drawing</div>
        <button class="modal-close" aria-label="Close modal" data-close>&times;</button>
        <div class="modal-body">
          <p id="mem6Text">Tu school me thi 12th me tab tune merko school se ye Drawing banake bheji thi awwww.</p>
          <div id="mem6Date" class="modal-date">7 Sep 2024</div>
        </div>
      </div>
    </div>

    <!-- Comeback paragraph -->
    <section aria-labelledby="comeback-heading">
      <div class="comeback-card" role="region" aria-describedby="Ek Hi Dil Se Baat Bolunga Tiwari Tumko">
        <div class="separator-icons" aria-hidden="true">
          <!-- subtle icons (minimal emojis) -->
          <span>✨</span>
          <span>💕</span>
        </div>
        <h3 id="comeback-heading" class="section-title" style="margin-bottom:8px;">I'm sorry & I want us back</h3>
        <p id="comebackText">Main tumse sacchai se maafi maangta hoon. Raksha ❤️ mujhe sirf ek baar calmly sun lo. Mujhe tumse zindagi bhar saath nibhana hai. Shaadi tak soch chuka hoon aur mere gharwalo ko bhi pata hai. Mera dil sirf tumhare liye ha
Mujhse galtiyan hui, overthinking aur behaviour ki wajah se tumhe hurt kiya – uske liye main genuinely sorry hoon. Kal se khana theek se nahi khaya, upwas jaisa rakha hai, par ye sab tum par pressure daalne ke liye nahi bata raha, balki isliye ki tum samjho ki main tumhe kitna seriously chahta hoon.
Bas mujhe ek last chance de do apna sudhaar dikhane ka. Main tumhe school, society, kahin bhi hurt nahi karunga. Tum meri izzat ho aur meri life ka sabse important hissa. Agar tum mujhe maaf karke ek baar accept kar logi, to main zindagi bhar tumhara trust todne layak kuch nahi karunga. Please baby maan jaa yrr, tere aalwa me kisi ke sath set nahi huntu soch tu karelgi kisi ir se shadi reh legi khush mere bina ye bata? nahi rehagi na rakhna h merko kisi ke sath please sath re maaf karde or maaf krde merko pleaseee baby. ❤️”.</p>
      </div>
    </section>

    <!-- Chat Section (single block) -->
    <section aria-labelledby="chat-heading">
      <div class="chat-wrap" role="region" aria-labelledby="chat-heading" >
        <div class="chat-header">
          <div class="chat-title" id="chat-heading">Our Chat</div>
        </div>
        <div id="chatList" class="chat-list" aria-live="polite"></div>
      </div>
    </section>

    <!-- Future Goals -->
    <section aria-labelledby="goals-heading">
      <h3 id="goals-heading" class="section-title">Our small dream's</h3>
      <div class="goals-card" role="region" aria-describedby="futureGoalsText">
        <p id="futureGoalsText">raksha tumne hi kaha tha ki hum hamesha saath rahenge chahe kitni bhi galtiyan ho ek dusre ko maaf karenge tumne hi future goals ki baat ki thi ki 2030 tak successful hoke hum shaadi karenge tum mera tiffin banaogi main ghar ke kaam karunga hum saath mandir jayenge aur mummy papa ke saath ek pyaari si family banayenge jisme do bachche honge ye sab soch main kisi aur ke saath kabhi share nahi karna chahta na pehle kiya tha na ab karunga mujhe sirf tum chahiye main kisi aur ke saath kabhi nahi reh sakta mujhe gussa aa jaye to mujhe mana liya karo par mujhe apne se door mat bhejna kyunki main tumhare bina reh nahi sakta ( I  truly love you raksha please mujhe maaf kar do aur ek last chance de do )  main hamesha tumhare saath khada rahunga 😭🫶🏻♥️🫠🖐🏼🍞🥞🤺🛴📸💗🗯️🥤🥝🌟🌺🐚🐁🦦🪼🐣💍👩🏻‍❤️‍💋‍👨🏼🧎🏻‍♀️‍➡️🧎🏻‍♂️👩🏼‍🦽‍➡️👨🏻‍🦽🙍🏼‍♂️🙇🏻🥷🏼💋🫵🏻👊🥰 dreams built together.</p>
        <!-- small toy svgs (decorative) -->
        <svg class="toy-svg" style="left:8%; top:-10%; position:absolute;" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l2.1 5.9L20 9l-5 3.6L16.2 19 12 15.9 7.8 19 9 12.6 4 9l5.9-1.1L12 2z" fill="#FF6B81"/></svg>
        <svg class="toy-svg" style="right:10%; top:6%; position:absolute;" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="8" r="6" fill="#CDE8FF"></circle></svg>
      </div>
    </section>
  </main>

  <footer role="contentinfo">
    Made for Raksha Tiwari by Divyanshu Nagori
  </footer>

  <button class="back-top" id="backTop" aria-label="Back to top">↑</button>

<script>
/* =========================
   Helper / Prefers-reduced-motion
   ========================= */
const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

/* =========================
   Headline letter animation (stagger)
   ========================= */
(function headline(){
  const el = document.getElementById('heroLetters');
  const text = el.textContent.trim();
  el.textContent = '';
  const frag = document.createDocumentFragment();
  [...text].forEach((ch, i)=>{
    const span = document.createElement('span');
    span.textContent = ch;
    frag.appendChild(span);
    // stagger add class
    if(!reduceMotion){
      setTimeout(()=> span.classList.add('in'), 40 * i);
    } else {
      span.classList.add('in');
    }
  });
  el.appendChild(frag);
})();

/* =========================
   Particles generation (throttled)
   ========================= */
(function particles(){
  if(reduceMotion) return;
  const wrap = document.getElementById('particles');
  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
  const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
  const count = Math.min(20, Math.floor((vw*vh)/120000)); // scale by viewport
  function rand(a,b){ return Math.random()*(b-a)+a; }
  for(let i=0;i<count;i++){
    const d = document.createElement('div');
    d.className = 'particle';
    const size = rand(8, 56);
    d.style.width = d.style.height = size + 'px';
    d.style.left = rand(0, 100) + '%';
    d.style.top = rand(10, 95) + '%';
    d.style.background = i%3===0 ? 'rgba(255,255,255,0.6)' : 'rgba(255,255,255,0.35)';
    const dur = rand(8000, 21000);
    d.animate([{ transform: 'translateY(0)', opacity: 0.6 }, { transform: `translateY(-${rand(30, 180)}px)`, opacity: 0.95 }], { duration: dur, iterations: Infinity, direction: 'alternate', easing: 'ease-in-out', delay: -rand(0, dur) });
    wrap.appendChild(d);
  }
})();

/* =========================
   Modal logic (open/close, focus trap, ESC, click outside)
   ========================= */
(function modals(){
  const openBtns = document.querySelectorAll('[data-modal]');
  const modals = document.querySelectorAll('.modal-backdrop');

  let lastActive = null;

  function trapFocus(modalCard){
    const focusable = modalCard.querySelectorAll('button, a, input, textarea, [tabindex]:not([tabindex="-1"])');
    if(!focusable.length) return ()=>{};
    const first = focusable[0], last = focusable[focusable.length-1];
    function keyHandler(e){
      if(e.key !== 'Tab') return;
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }
    modalCard.addEventListener('keydown', keyHandler);
    return ()=> modalCard.removeEventListener('keydown', keyHandler);
  }

  function openModal(id, trigger){
    const bd = document.getElementById(id);
    if(!bd) return;
    lastActive = trigger || document.activeElement;
    bd.setAttribute('aria-hidden', 'false');
    const card = bd.querySelector('.modal-card');
    const untrap = trapFocus(card);
    // expose untrap for close
    card._untrap = untrap;
    // focus close
    const closeBtn = bd.querySelector('[data-close]');
    if(closeBtn) closeBtn.focus({preventScroll:true});
    // sparkle / tiny visual when open (subtle)
    // (we keep it minimal per request)
  }

  function closeModal(bd){
    if(!bd) return;
    bd.setAttribute('aria-hidden', 'true');
    const card = bd.querySelector('.modal-card');
    if(card && card._untrap) card._untrap();
    if(lastActive) { try{ lastActive.focus(); }catch(e){} }
  }

  openBtns.forEach(btn=>{
    btn.addEventListener('click', ()=> {
      const id = btn.getAttribute('data-modal');
      openModal(id, btn);
    });
  });

  modals.forEach(bd=>{
    bd.addEventListener('click', (e)=>{
      if(e.target === bd) closeModal(bd);
    });
    // close buttons
    const c = bd.querySelector('[data-close]');
    if(c) c.addEventListener('click', ()=> closeModal(bd));
  });

  // ESC to close
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape'){
      document.querySelectorAll('.modal-backdrop[aria-hidden="false"]').forEach(bd => closeModal(bd));
    }
  });

  // keyboard: open via Enter on mem-card (accessibility)
  document.querySelectorAll('.mem-card').forEach(card=>{
    card.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') {
        const btn = card.querySelector('[data-modal]');
        if(btn) btn.click();
      }
    });
  });
})();

/* =========================
   Chat rendering (IG-like, minimal emojis), staggered entrance using IntersectionObserver
   Chat data is editable below (replace avatar src or texts)
   ========================= */
const chatMessages = [
  { from:'her', text: "You Lost", avatar: "images/rakshapfp.jpg" },
  { from:'me', text: "Awww Moti Shanti Rakh Muh Tod Dunga.", avatar: "images/divpfp.jpg" },
  { from:'her', text: "Aaye Bade Huu.", avatar: "images/rakshapfp.jpg" },
  { from:'me', text: "Chal Sorry Moto Love u Ajj Ke baad bakchodi Ni krunga Promise.", avatar: "images/divpfp.jpg" },
  { from:'her', text: "Okh Baby Muhahahaha.", avatar: "images/rakshapfp.jpg" }
];

(function renderChat(){
  const list = document.getElementById('chatList');
  chatMessages.forEach((m, i)=>{
    const row = document.createElement('div');
    row.className = 'chat-row ' + (m.from === 'me' ? 'chat-right' : 'chat-left');
    row.innerHTML = `
      <img src="${m.avatar}" alt="${m.from==='me' ? 'My avatar' : 'Her avatar'}" class="chat-avatar" />
      <div>
        <div class="chat-bubble ${m.from === 'me' ? 'me' : ''}">${escapeHtml(m.text)}</div>
        <div class="chat-ts">${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</div>
      </div>
    `;
    list.appendChild(row);
  });
  // intersection observer for stagger in
  const rows = document.querySelectorAll('.chat-row');
  const io = new IntersectionObserver((entries, obs)=>{
    entries.forEach((entry)=>{
      if(entry.isIntersecting){
        entry.target.classList.add('in');
        obs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.05 });
  rows.forEach((r, idx)=>{
    r.style.transitionDelay = (idx * 90) + 'ms';
    io.observe(r);
  });
})();

function escapeHtml(s){ const p = document.createElement('p'); p.appendChild(document.createTextNode(s)); return p.innerHTML; }

/* =========================
   Open memories CTA
   ========================= */
document.getElementById('openMemBtn').addEventListener('click', ()=> {
  document.getElementById('memories').scrollIntoView({ behavior:'smooth', block:'start' });
});

/* =========================
   Back to top
   ========================= */
const backTop = document.getElementById('backTop');
backTop.addEventListener('click', ()=> window.scrollTo({ top:0, behavior:'smooth' }));
// show/hide on scroll
function toggleBackTop(){ if(window.scrollY > 420) backTop.style.opacity = '1'; else backTop.style.opacity = '0'; }
window.addEventListener('scroll', toggleBackTop, { passive:true });
toggleBackTop();

/* =========================
   Easy: keyboard focus style only when tabbing
   ========================= */
(function focusOutlineToggle(){
  function handleFirstTab(e){ if(e.key === 'Tab'){ document.body.classList.add('user-is-tabbing'); window.removeEventListener('keydown', handleFirstTab); } }
  window.addEventListener('keydown', handleFirstTab);
})();

/* =========================
   Accessibility: hide modals from AT when closed
   Already handled by aria-hidden toggles when opened/closed via script above
   ========================= */

/* =========================
   Make mem images replace-easy: (just example, nothing required)
   You can replace <img id="mem1Img"> src with your photo path
   ========================= */
</script>
</body>
</html>
